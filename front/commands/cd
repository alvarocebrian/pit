# Add command
function cd() {
    if [ $# -gt 0 ]; then
        pathName=$(echo $* | tr -d "@")
        path=$(pit path find $pathName 2> /dev/null);

        if [ ${#path} -gt 0 ];then command cd $path; return 0; fi
    fi

    if [ -z "$*" ]; then
        command cd
    else
        command cd "$*"
    fi
}

# cd autocomplete
function __cd_pit()
{
    local cur prev words cword
    _get_comp_words_by_ref cur prev words cword

    # Get cd results and get paths
    _cd
    local paths=$(pit path list -n);
    for path in $(compgen -W "$paths" $cur); do
        COMPREPLY+=("@$path")
    done;
}

complete -F __cd_pit cd